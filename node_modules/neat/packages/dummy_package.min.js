(function(){var e,t,n,r,i,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=[].slice;this.neat||(this.neat={}),(i=this.neat).core||(i.core={}),r=function(e,t){var n,r,i;i=[];for(n in t)r=t[n],i.push(typeof Object.defineProperty=="function"?Object.defineProperty(e.prototype,n,{enumerable:!1,value:r,writable:!0}):void 0);return i},Object["new"]=function(e){var t;return t={},e.step(2,function(e,n){return t[e]=n}),t},r(Object,{concat:function(e){var t,n,r;n={};for(t in this)r=this[t],n[t]=r;return n.merge(e||{})}}),r(Object,{destroy:function(e){var t;return this.hasKey(e)?(t=this[e],delete this[e],t):null}}),r(Object,{each:function(e){var t,n;if(e!=null)for(t in this)n=this[t],e(t,n);return this}}),r(Object,{empty:function(){return this.keys().empty()}}),r(Object,{first:function(){return this.empty()?null:this.flatten().group(2).first()}}),r(Object,{flatten:function(){var e,t,n;e=[];for(t in this)n=this[t],e=e.concat([t,n]);return e}}),r(Object,{has:function(e){return s.call(this.values(),e)>=0}}),r(Object,{hasKey:function(e){return this[e]!=null}}),r(Object,{keys:function(){var e,t;t=[];for(e in this)t.push(e);return t}}),r(Object,{length:function(){return this.keys().length}}),r(Object,{last:function(){return this.empty()?null:this.flatten().group(2).last()}}),r(Object,{map:function(e){var t,n;return Object["new"](function(){var r;r=[];for(t in this)n=this[t],r.push(e(t,n));return r}.call(this).flatten())}}),r(Object,{merge:function(e){var t,n;for(t in e)n=e[t],this[t]=n;return this}}),r(Object,{reject:function(e){var t,n,r;n={};for(t in this){r=this[t];if(typeof e=="function"?!e(t,r):!void 0)n[t]=r}return n}}),r(Object,{select:function(e){var t,n,r;n={};for(t in this){r=this[t];if(typeof e=="function"?e(t,r):void 0)n[t]=r}return n}}),r(Object,{size:function(){return this.length()}}),r(Object,{sort:function(e){var t,n,r,i,s;if(e==null||typeof e!="function")e=function(e,t){return e>t?1:t<e?-1:0};n={},s=this.keys().sort(e);for(r=0,i=s.length;r<i;r++)t=s[r],n[t]=this[t];return n}}),r(Object,{sortedKeys:function(){return this.keys().sort()}}),r(Object,{sortedValues:function(){var e,t,n,r,i;r=this.sortedKeys(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this[e]);return i}}),r(Object,{type:function(){return Object.prototype.toString.call(this).toLowerCase().replace(/\[object (\w+)\]/,"$1")}}),r(Object,{update:Object.prototype.merge}),r(Object,{values:function(){var e,t,n,r,i;r=this.keys(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this[e]);return i}}),r(Object,{quacksLike:function(e){var t,n,r,i;if(e.__definition__!=null){t=e.__definition__;if(typeof t=="function")return t(this);for(n in t){r=t[n];switch(typeof r){case"function":if(!r(this[n]))return!1;break;default:if(r!=="*"&&((i=this[n])!=null?i.type():void 0)!==r)return!1}}return!0}return!1}}),r(Number,{ago:function(){return new Date((new Date).getTime()-this.valueOf())}}),r(Number,{days:function(){return this.hours()*24}}),r(Number,{even:function(){return this.valueOf()%2===0}}),r(Number,{fromNow:function(){return new Date((new Date).getTime()+this.valueOf())}}),r(Number,{hours:function(){return this.minutes()*60}}),Number.later=function(){return this.fromNow()},r(Number,{minutes:function(){return this.seconds()*60}}),r(Number,{odd:function(){return this.valueOf()%2===1}}),r(Number,{seconds:function(){return this.valueOf()*1e3}}),r(Number,{times:function(e){var t,n,r,i;if(typeof e=="function")return function(){var n,r,i;i=[];for(t=n=0,r=this.valueOf()-1;0<=r?n<=r:n>=r;t=0<=r?++n:--n)i.push(e(t));return i}.call(this);n=e;for(t=r=1,i=this.valueOf()-1;1<=i?r<=i:r>=i;t=1<=i?++r:--r)Array.isArray(n)?n=n.concat(e):n+=e;return n}}),r(Number,{to:function(e,t){var n,r,i,s;s=[];for(n=r=i=this.valueOf();i<=e?r<=e:r>=e;n=i<=e?++r:--r)s.push(t(n));return s}}),r(Number,{weeks:function(){return this.days()*7}}),r(String,{append:function(e){return""+this+e}}),r(String,{camelize:function(){var e,t,n,r,i;e=this.toLowerCase().split(/[_\s-]/),t=e.shift();for(r=0,i=e.length;r<i;r++)n=e[r],t=""+t+n.capitalize();return t}}),r(String,{capitalize:function(){return this.toLowerCase().replace(/^[a-z]/,function(e){return e.toUpperCase()})}}),r(String,{capitalizeAll:function(){return this.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,n){return""+t+n.toUpperCase()})}}),r(String,{center:function(e,t){var n,r;return e==null&&(e=0),t==null&&(t=" "),e>this.length?(n=Math.floor((e-this.length)/2),r=e-this.length-n,this.padLeft(n,t).padRight(r,t)):this.valueOf()}}),r(String,{compact:function(){return this.replace(/\s+/g,"")}}),r(String,{empty:function(){return this.length===0}}),r(String,{left:function(e){return this.padRight(e-this.length)}}),r(String,{padLeft:function(e,t){return e==null&&(e=0),t==null&&(t=" "),this.prepend(String.fill(e,t))}}),r(String,{padRight:function(e,t){return e==null&&(e=0),t==null&&(t=" "),this.append(String.fill(e,t))}}),r(String,{prepend:function(e){return""+e+this}}),r(String,{parameterize:function(){return this.nopunctuation().nodiacritics().toLowerCase().squeeze().replace(/\s/g,"-")}}),r(String,{right:function(e){return this.padLeft(e-this.length)}}),r(String,{squeeze:function(e){var t,n,r,i,s,o,u;e==null&&(e="\\s"),i=/^([A-Za-z_])-([A-Za-z])$/,s=null;if(i.test(e))u=i.exec(e),r=u[0],o=u[1],n=u[2],t=[],o.to(n,function(e){return t.push(""+e+"+")}),s=RegExp(""+t.join("|"),"g");else{if(e!=="\\s")return s=RegExp("("+e+")+","g"),this.replace(s,function(e,t){return t});s=/\n+| +|\t+/g}return this.replace(s,function(e){return e.substr(0,1)})}}),r(String,{strip:function(){return this.replace(/^\s+|\s+$/g,"")}}),r(String,{to:function(e,t){var n,r,i,s;r=this.charCodeAt(0),e=e.charCodeAt(0),s=[];for(n=i=r;r<=e?i<=e:i>=e;n=r<=e?++i:--i)s.push(t(String.fromCharCode(n)));return s}}),r(String,{underscore:function(){return this.replace(/([a-z])([A-Z])/g,"$1_$2").split(/[-/]|\s/g).join("_").toLowerCase()}}),r(String,{nodiacritics:function(){var e,t,n,r;t=this,r=String.DACRITICS_MAP;for(e in r)n=r[e],t=t.replace(n,e);return t}}),r(String,{nopunctuation:function(){return this.replace(/[,?;.:/!ยง*%=\[\](){}'"`\\_<>-]/g,"")}}),String.fill=function(e,t){var n,r,i,s,o;t==null&&(t=" "),i="",n=0;for(r=s=0,o=e-1;0<=o?s<=o:s>=o;r=0<=o?++s:--s)i=""+i+t[n++],n>=t.length&&(n=0);return i},String.DACRITICS_MAP={A:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g,AA:/[\uA732]/g,AE:/[\u00C6\u01FC\u01E2]/g,AO:/[\uA734]/g,AU:/[\uA736]/g,AV:/[\uA738\uA73A]/g,AY:/[\uA73C]/g,B:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g,C:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g,D:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g,DZ:/[\u01F1\u01C4]/g,Dz:/[\u01F2\u01C5]/g,E:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g,F:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g,G:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g,H:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g,I:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g,J:/[\u004A\u24BF\uFF2A\u0134\u0248]/g,K:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g,L:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g,LJ:/[\u01C7]/g,Lj:/[\u01C8]/g,M:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g,N:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g,NJ:/[\u01CA]/g,Nj:/[\u01CB]/g,O:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g,OI:/[\u01A2]/g,OO:/[\uA74E]/g,OU:/[\u0222]/g,P:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g,Q:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g,R:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g,S:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g,T:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g,TZ:/[\uA728]/g,U:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g,V:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g,VY:/[\uA760]/g,W:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g,X:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g,Y:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g,Z:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g,a:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g,aa:/[\uA733]/g,ae:/[\u00E6\u01FD\u01E3]/g,ao:/[\uA735]/g,au:/[\uA737]/g,av:/[\uA739\uA73B]/g,ay:/[\uA73D]/g,b:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g,c:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g,d:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g,dz:/[\u01F3\u01C6]/g,e:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g,f:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g,g:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g,h:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g,hv:/[\u0195]/g,i:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g,j:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g,k:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g,l:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g,lj:/[\u01C9]/g,m:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g,n:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g,nj:/[\u01CC]/g,o:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g,oi:/[\u01A3]/g,ou:/[\u0223]/g,oo:/[\uA74F]/g,p:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g,q:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g,r:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g,s:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g,t:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g,tz:/[\uA729]/g,u:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g,v:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g,vy:/[\uA761]/g,w:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g,x:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g,y:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g,z:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g},Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},r(Array,{compact:function(){return this.select(function(e){return e!=null})}}),r(Array,{empty:function(){return this.length===0}}),r(Array,{first:function(){return this.length>0?this[0]:void 0}}),r(Array,{flatten:function(e){var t,n,r,i;e==null&&(e=Infinity),e<0&&(e=Infinity),t=[];for(r=0,i=this.length;r<i;r++)n=this[r],Array.isArray(n)&&e!==0?t=t.concat(n.flatten(e-1)):t.push(n);return t}}),r(Array,{group:function(e){var t;return t=[],this.step(e,function(){var e;return t.push(function(){var t,n,r;r=[];for(t=0,n=arguments.length;t<n;t++)e=arguments[t],r.push(e);return r}.apply(this,arguments))}),t}}),r(Array,{last:function(){return this.length>0?this[this.length-1]:void 0}}),r(Array,{max:function(){return Math.max.apply(null,this)}}),r(Array,{min:function(){return Math.min.apply(null,this)}}),r(Array,{reject:function(e){var t,n,r,i;i=[];for(n=0,r=this.length;n<r;n++)t=this[n],(typeof e=="function"?!e(t):!void 0)&&i.push(t);return i}}),r(Array,{rotate:function(e){var t,n,r,i,s,o,u,a,f,l,c;e==null&&(e=1),e===0&&(e=1),t=e>0,r=this.concat(),i=function(){c=[];for(var t=0,n=Math.abs(e)-1;0<=n?t<=n:t>=n;0<=n?t++:t--)c.push(t);return c}.apply(this);if(t)for(o=0,a=i.length;o<a;o++)n=i[o],r.push(r.shift());else for(u=0,f=i.length;u<f;u++)n=i[u],r.unshift(r.pop());return r}}),r(Array,{select:function(e){var t,n,r,i;i=[];for(n=0,r=this.length;n<r;n++)t=this[n],(typeof e=="function"?e(t):void 0)&&i.push(t);return i}}),r(Array,{step:function(e,t){var n,r,i,s;s=[];for(n=r=0,i=Math.ceil(this.length/e)-1;0<=i?r<=i:r>=i;n=0<=i?++r:--r)s.push(t!=null?t.apply(this,this.slice(n*e,+(n*e+e-1)+1||9e9)):void 0);return s}}),r(Array,{uniq:function(){var e,t,n,r;e=[];for(n=0,r=this.length;n<r;n++)t=this[n],s.call(e,t)<0&&e.push(t);return e}}),e=function(e){var t;return t=e.included,e.included=function(n){var r;typeof t=="function"&&t(n),(r=n.__mixins__)==null&&(n.__mixins__=[]);if(s.call(n.__mixins__,e)<0)return n.__mixins__.push(e)},e.excluded=["isMixinOf","__definition__"],e.isMixinOf=function(t){if(t.constructor.__mixins__!=null)return s.call(t.constructor.__mixins__,e)>=0},e},t=function(){function e(){this.preventConstructorHooksInModule||this.triggerConstructorHooks()}return e.include=function(){var e,t,n,r,i,u,a,f,l;i=1<=arguments.length?o.call(arguments,0):[],this.__superOf__=this.__superOf__.concat(),a=["constructorHook","included","excluded"];for(f=0,l=i.length;f<l;f++){r=i[f],e=r.excluded!=null?a.concat(r.excluded):a.concat();for(n in r){u=r[n];if(!(s.call(e,n)<0))continue;this.prototype[n]=u,typeof u=="function"&&(this.__superOf__[n]=this.__super__)}r.constructorHook!=null&&(t=r.constructorHook,this.__hooks__=this.__hooks__.concat(t))}return typeof r.included=="function"&&r.included(this),this},e.__hooks__=[],e.__superOf__={},e.prototype.preventConstructorHooksInModule=!1,e.prototype.triggerConstructorHooks=function(){var e,t,n,r,i;r=this.constructor.__hooks__,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.call(this));return i},e.prototype["super"]=function(){var e,t,n,r;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],(n=this.constructor.__superOf__[t])!=null?(r=n[t])!=null?r.apply(this,e):void 0:void 0},e}(),n=function(){function e(){var e;e=1<=arguments.length?o.call(arguments,0):[],this.signature=e,this.listeners=[],this.asyncListeners=0}return e.prototype.add=function(e,t,n){n==null&&(n=0),this.validate(e);if(!this.registered(e,t))return this.listeners.push([e,t,!1,n]),this.isAsync(e)&&this.asyncListeners++,this.sortListeners()},e.prototype.addOnce=function(e,t,n){n==null&&(n=0),this.validate(e);if(!this.registered(e,t))return this.listeners.push([e,t,!0,n]),this.isAsync(e)&&this.asyncListeners++,this.sortListeners()},e.prototype.remove=function(e,t){if(this.registered(e,t))return this.isAsync(e)&&this.asyncListeners--,this.listeners.splice(this.indexOf(e,t),1)},e.prototype.removeAll=function(){return this.listeners=[],this.asyncListeners=0},e.prototype.indexOf=function(e,t){var n,r,i,s,o,u,a;u=this.listeners;for(r=s=0,o=u.length;s<o;r=++s){a=u[r],i=a[0],n=a[1];if(e===i&&t===n)return r}return-1},e.prototype.registered=function(e,t){return this.indexOf(e,t)!==-1},e.prototype.hasListeners=function(){return this.listeners.length!==0},e.prototype.sortListeners=function(){if(this.listeners.length<=1)return;return this.listeners.sort(function(e,t){var n,r,i;return i=[e[3],t[3]],n=i[0],r=i[1],n<r?1:r<n?-1:0})},e.prototype.validate=function(e){var t,n,r,i,s,o,u;if(this.signature.length>0){i=/[^(]+\(([^)]+)\).*$/m,n=Function.prototype.toString.call(e).split("\n").shift(),u=n.replace(i,"$1"),t=u.split(/\s*,\s*/g),t.first()===""&&t.shift(),t.last()==="callback"&&t.pop(),s=this.signature.join(),o=t.join(),r="The listener "+e+" doesn't match the signal's signature "+s;if(o!==s)throw new Error(r)}},e.prototype.isAsync=function(e){return Function.prototype.toString.call(e).indexOf("callback)")!==-1},e.prototype.dispatch=function(){var e,t,n,r,i,s,u,a,f,l,c,h,p=this;e=2<=arguments.length?o.call(arguments,0,f=arguments.length-1):(f=0,[]),t=arguments[f++],typeof t!="function"&&(e.push(t),t=null),i=this.listeners.concat();if(this.asyncListeners>0)return s=function(t){var n,r,o,u,a;return i.length?(a=i.shift(),r=a[0],n=a[1],o=a[2],u=a[3],p.isAsync(r)?r.apply(n,e.concat(function(){return o&&p.remove(r,n),s(t)})):(r.apply(n,e),o&&p.remove(r,n),s(t))):typeof t=="function"?t():void 0},s(t);for(l=0,c=i.length;l<c;l++)h=i[l],r=h[0],n=h[1],u=h[2],a=h[3],r.apply(n,arguments),u&&this.remove(r,n);return typeof t=="function"?t():void 0},e}(),f(0),this.neat.core.def=r,this.neat.core.Mixin=e,this.neat.core.Module=t,this.neat.core.Signal=n}).call(this)